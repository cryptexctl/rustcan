# Внесение вклада в Rustcan

## Настройка среды разработки

### 1. Предварительные требования
- Rust 1.70 или новее
- Cargo
- Git
- Базовое понимание сетевых концепций

### 2. Начало работы
```bash
# Клонирование репозитория
git clone https://github.com/systemxplore/rustcan.git
cd rustcan

# Установка зависимостей
cargo build

# Запуск тестов
cargo test
```

### 3. Среда разработки
- Рекомендуемая IDE: VS Code с Rust Analyzer
- Форматирование кода: rustfmt
- Линтинг: clippy
- Документация: rustdoc

## Руководство по стилю кода

### 1. Соглашения Rust
```rust
// Используйте snake_case для функций и переменных
fn scan_port(target: &str, port: u16) -> Result<()> {
    // ...
}

// Используйте PascalCase для типов и трейтов
struct Scanner {
    // ...
}

// Используйте SCREAMING_SNAKE_CASE для констант
const MAX_CONNECTIONS: usize = 1000;
```

### 2. Документация
```rust
/// Сканирует один порт на целевом хосте.
///
/// # Аргументы
///
/// * `target` - Целевой хост для сканирования
/// * `port` - Номер порта для сканирования
///
/// # Возвращаемое значение
///
/// Возвращает `Ok(())` если порт открыт, `Err` в противном случае.
pub async fn scan_port(target: &str, port: u16) -> Result<()> {
    // ...
}
```

### 3. Обработка ошибок
```rust
#[derive(Debug, thiserror::Error)]
pub enum ScanError {
    #[error("Ошибка соединения: {0}")]
    ConnectionError(#[from] std::io::Error),
    #[error("Таймаут: {0}")]
    TimeoutError(String),
}
```

## Рекомендации по тестированию

### 1. Модульные тесты
```rust
#[cfg(test)]
mod tests {
    use super::*;
    
    #[tokio::test]
    async fn test_port_scan() {
        let scanner = Scanner::new(/* ... */);
        let result = scanner.scan_port(/* ... */).await;
        assert!(result.is_ok());
    }
}
```

### 2. Интеграционные тесты
```rust
#[cfg(test)]
mod integration {
    use super::*;
    
    #[tokio::test]
    async fn test_full_scan() {
        let scanner = Scanner::new(/* ... */);
        let results = scanner.scan().await;
        assert!(!results.is_empty());
    }
}
```

### 3. Тесты производительности
```rust
#[cfg(test)]
mod benchmarks {
    use super::*;
    use test::Bencher;
    
    #[bench]
    fn bench_port_scan(b: &mut Bencher) {
        b.iter(|| {
            // Код для бенчмаркинга
        });
    }
}
```

## Процесс Pull Request

### 1. Перед отправкой
- Запустите все тесты
- Проверьте форматирование кода
- Обновите документацию
- Добавьте новые тесты при необходимости

### 2. Шаблон Pull Request
```markdown
## Описание
[Описание изменений]

## Связанные задачи
[Ссылка на связанные задачи]

## Тестирование
- [ ] Добавлены/обновлены модульные тесты
- [ ] Добавлены/обновлены интеграционные тесты
- [ ] Добавлены/обновлены тесты производительности

## Документация
- [ ] Добавлены/обновлены комментарии к коду
- [ ] Обновлена документация
- [ ] Обновлен README при необходимости
```

### 3. Процесс ревью
- Ревью кода мейнтейнерами
- Проверки CI/CD пайплайна
- Оценка влияния на производительность
- Проверка безопасности

## Процесс разработки

### 1. Стратегия ветвления
- `main` - Стабильная ветка релиза
- `develop` - Ветка разработки
- `feature/*` - Ветки функциональности
- `bugfix/*` - Ветки исправления ошибок

### 2. Сообщения коммитов
```
feat: добавление новой функции сканирования
fix: исправление проблемы с таймаутом соединения
docs: обновление API документации
test: добавление интеграционных тестов
chore: обновление зависимостей
```

### 3. Процесс релиза
- Увеличение версии
- Обновление changelog
- Обновление документации
- Примечания к релизу

## Структура проекта

### 1. Исходный код
```
src/
├── main.rs         # CLI интерфейс
├── scanner.rs      # Основная логика сканирования
├── patterns.rs     # Сопоставление паттернов
├── service_detection.rs # Определение сервисов
├── dns.rs          # DNS-резолвинг
├── types.rs        # Общие типы
├── utils.rs        # Вспомогательные функции
└── lib.rs          # Интерфейс библиотеки
```

### 2. Тесты
```
tests/
├── unit/           # Модульные тесты
├── integration/    # Интеграционные тесты
└── benchmarks/     # Тесты производительности
```

### 3. Документация
```
docs/
├── api/            # API документация
├── examples/       # Примеры кода
└── guides/         # Руководства пользователя
```

## Правила сообщества

### 1. Общение
- Используйте GitHub issues для сообщений об ошибках
- Используйте discussions для вопросов
- Следуйте кодексу поведения
- Будьте уважительны и профессиональны

### 2. Типы вклада
- Сообщения об ошибках
- Запросы функциональности
- Обновления документации
- Улучшения кода
- Оптимизации производительности

### 3. Получение помощи
- Проверьте документацию
- Поищите в существующих задачах
- Спросите в discussions
- Свяжитесь с мейнтейнерами 